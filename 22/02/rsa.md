# RSA 暗号の入り口だけを理解する

入り口は、変わった性質を持つ ３つの数の組み合わせ の確認。
入り口だけの理解で十分かな。。
あとは理解できないので理解と言うより信頼。

## 性質１

```
暗号化したい 値 があって、　それを、

　E乗してから N で割った 余り （暗号）

を

　D乗してから N で割った 余り

が

　元の値に戻っている。（復号）

そんな　E D N の組み合わせが存在する。
```

## 性質２

```
性質１の E D N の組み合わせは比較的簡単に作れ、E と N を公開しても（公開鍵）、 D は簡単に見つけられない。（秘密鍵）
```

## 性質３

```
性質１の あまり（暗号） と E と N から、もとの値を計算することはできない。（一方向性）
```

# 証明

## 性質１の証明

手品のようですが、本当に存在します。
![](22/02/rsa-01.png)
E = 7 , D = 3 , N = 33 　がこの組み合わせです。

## 性質２の証明

素因数分解の困難さが根拠だそうです。
　記事：[RSA 暗号の仕組み](https://qiita.com/YutaKase6/items/cd9e26d723809dc85928)
仕組み全体の証明を得るには、オイラーとか、フェルマーとかでてきます。。信頼するしかない。

## 性質３の証明

D と N が十分に大きい数字であれば、余りと商から、累乗された元の数値は特定できないということなのかな。
　記事：[RSA 暗号](https://sehermitage.web.fc2.com/cmath/rsa.html)
さらに工夫することで一方向性を高めているようです。

（備考）
RSA 暗号の公開鍵の一方向性について、上記の他には説明した記事が見つけられなかったのですが

- あたりまえすぎて、説明されていないのか
- 自分がわからないところ飛ばしてるうちに通り過ぎているのか

34 を 33 で割っても余りは 1 だし、67 を 33 で割っても余りは 1 なので、余りと商から元の値を特定できないということは分かりますが・・
たいていは文章を暗号化するので、元の数値は偏ってるし、文章として読めるという条件なら、繰り返し計算したら、公開鍵の情報からもとの文章が復号出来るんじゃないかと思ってましたが・・
記事を読んで少し理解出来ました。でもだいぶ難しいので、結局信頼するしかない。

## 信頼性について

記事：[公開鍵暗号の理論研究における最近の動向](https://www.imes.boj.or.jp/research/papers/japanese/kk18-2-6.pdf)

RSA 暗号の信頼性は、素因数分解の困難さと、素因数分解以外での解き方が発見されていないということが根拠らしいのですが、素因数分解以外での解き方がない事の証明まではいってないそうです。

素因数分解の困難さもコンピューターの発達によって変わる事が考えられるので、結局の所、今のところまだ誰も突破したやつがいないということが信頼性の根拠のようです。

ということは、結局、オイラーやフェルマーを理解したとしても RSA を信頼して使うということ。

じゃあ、性質１だけ理解して注意事項押さえとけばいいんじゃないかと思います。

# これら性質の応用

性質１～３のような数値の性質を使って、いろんなこと出来ます。
ルート証明書が一番重要な技術じゃないかと思いました。

記事：[公開鍵暗号](https://jprs.jp/glossary/index.php?ID=0226)
記事：[電子署名](https://esac.jipdec.or.jp/why-e-signature/PKI-crypto-mechanism.html#:~:text=%E5%85%AC%E9%96%8B%E9%8D%B5%E7%94%A8%E3%81%84%E3%81%A6%E7%BD%B2%E5%90%8D,%E3%81%A8%E5%91%BC%E3%81%B6%E3%81%93%E3%81%A8%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82)
記事：[ルート証明書](https://qiita.com/TakahikoKawasaki/items/4c35ac38c52978805c69)

# きっかけ

そもそも、商業登記の電子証明書を取ろうとして、みんなこれで電子署名できたらいいのにと思ってました。
ただ、電子署名を検証する手段がないなと思っていましたが・・
よく調べてみると、電子署名の検証は簡単らしい。

記事：[商業登記電子証明書(法人印鑑証明書の電子化みたいなもの)のメモ](https://qiita.com/syoyo/items/831ffa7950c814602ada)

しかしなぜ簡単なのかは全く理解できなかったので、色々調べたのがこの記事です。

クラウドサインとか、アドビサインとか、ドキュサインとか、必要なんかな。
みんな、マイナンバーと商業登記電子証明で、電子署名すればいいのに。

# 上記のほか、注意事項、参考記事など

[公開鍵暗号](https://www.ieice-hbkb.org/files/01/01gun_03hen_05.pdf)
[RSA 暗号運用でやってはいけない n のこと](https://www.slideshare.net/sonickun/rsa-n-ssmjp)
[公開鍵暗号方式と電子署名](https://medium.com/blockchain-engineer-blog/%E7%A7%81%E3%81%AF%E5%85%AC%E9%96%8B%E9%8D%B5%E6%9A%97%E5%8F%B7%E6%96%B9%E5%BC%8F%E3%81%A8%E9%9B%BB%E5%AD%90%E7%BD%B2%E5%90%8D%E3%82%92%E7%90%86%E8%A7%A3%E3%81%A7%E3%81%8D%E3%81%A6%E3%81%84%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%82%88%E3%81%86%E3%81%A7%E3%81%99-af0894c3df0b)
[RSA 暗号の誤解](https://qiita.com/angel_p_57/items/d7ffb9ec13b4dde3357d)
